<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8">
		<title>My Token</title>

		<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"></script>
		<script src="https://cdn.jsdelivr.net/gh/ethereum/web3.js@v1.0.0-beta.36/dist/web3.min.js"></script>
		<script src="https://cdn.jsdelivr.net/gh/vrde/web3-browser-loader@master/index.js"></script>
	<script>
const ABI = [ { "constant": true, "inputs": [], "name": "name", "outputs": [ { "name": "", "type": "string" } ], "payable": false, "stateMutability": "view", "type": "function" }, { "inputs": [ { "name": "initialSupply", "type": "uint256" } ], "payable": false, "stateMutability": "nonpayable", "type": "constructor" }, { "constant": false, "inputs": [ { "name": "_to", "type": "address" }, { "name": "_value", "type": "uint256" } ], "name": "transfer", "outputs": [], "payable": false, "stateMutability": "nonpayable", "type": "function" }, { "constant": true, "inputs": [ { "name": "_address", "type": "address" } ], "name": "getBalance", "outputs": [ { "name": "", "type": "uint256" } ], "payable": false, "stateMutability": "view", "type": "function" } ]

const ADDRESS = '0x1f0ce03ca4660255dddf0fed9dd9fdd4681dcad3'

async function boot () {
	const web3 = await loadWeb3()
	const contract = new web3.eth.Contract(ABI, ADDRESS)
	const address = (await web3.eth.getAccounts())[0]
	const tokenName = await contract.methods.name().call()
	const balance = await contract.methods.getBalance(address).call()

	$('#tokenName').text(tokenName)
	$('#account').text(address)
	$('#balance').text(balance)

	$('#send').on('click', function (event) {
		const receiver = $('#receiver').val()
		const amount = parseInt($('#amount').val(), 10)
		contract.methods.transfer(receiver, amount).send({ from: address })
	})

	// If you want to play with web3 and the contract using the browser inspector
	// uncomment the following lines.
	// window.web3 = web3
	// window.contract = contract
}

boot()
	</script>
	</head>

	<body>
		<div class="container">
			Hello <span id="account">0x0</span><br/>
			Your balance is <span id="balance">0</span> <strong id="tokenName"></strong> tokens<br/>
			Transfer <input id="amount" size="1" /> tokens to address <input id="receiver" type="text" /> <button id="send">Send</button>
		</div>
	</body>
</html>
